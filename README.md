# WB_SQL_1
Wildberries SQL hometask

# Introduction
1.	Нет, более одной строки с одинаковым первичным ключом быть не может, так как первичный ключ должен быть уникальным и  однозначно идентифицировать каждую строку в таблице.

   
2.	Redis – нереляционная резидентная СУБД типа NoSQL.  Структура данных – ключ-значение(словарь). Особенности работы данной СУБД:
- Данные хранятся в оперативной памяти сервера, тем самым данная СУБД достигает высокой производительности и низкой задержки при выполнении операций чтения и записи.Однако, максимальный объём данных, которые можно хранить ограничен объёмом оперативной памяти, следовательно, Redis подходит для обработки небольшого потока данных.
- Позволяет работать с неструктурированными данными.


3.	MongoDB – это документоориентированная нереляционная СУБД. Аналогом таблицы является коллекция, а аналогом строки – документ, записанный в формате JSON-подобной структуры
Пример документа:
```
{
    "_id": ObjectId("615b4d320a3b8d4d8bea6e1d"),
    "name": "John Doe",
    "age": 30,
    "email": "johndoe@example.com",
    "address": {
        "street": "123 Main Street",
        "city": "New York",
        "state": "NY",
        "country": "USA"
    },
    "interests": ["sports", "music", "travel"]
}
```

4.

1) Анализ поведения знаменитостей в социальной сети:
Для данной задачи подходят графовые системы которые можно легко масштабировать и расширять, такие как Neo4j или Amazon Neptune.
2) Онлайн-аналитика действий пользователей на сайте онлайн магазина. Включая информацию о клиентах, товарах, заказах:
Для этой задачи рекомендуется использовать аналитические базы данных или колоночные базы данных, такие как Apache Cassandra или Clickhouse. Они способны обрабатывать большие объемы данных и предоставлять быструю аналитику на основе действий пользователей.


3) Анализ документации по фильмам и сериалам, включая: название, год выпуска, список актеров, жанр и т.д:
Реляционные СУБД(MySQL, PostgreSQL) позволяют эффективно хранить структурированные данные, такие как название, год выпуска, список актеров, жанр и т.д., и выполнять гибкие запросы для анализа данных.

4) Проектирование наиболее оптимальных маршрутов поставок для маркетплейса:
Для задачи проектирования наиболее оптимальных маршрутов поставок для маркетплейса рекомендуется использовать специализированные графовые базы данных (Neo4j, Amazon Neptune, InfoGrid). Эти типы СУБД предлагают эффективное моделирование и обработку связей и отношений между данными, что является ключевым критерием для задач оптимизации маршрутов поставок.


6) Хранение кэшированных HTML страниц пользователей, посещающих сайт:
В этом случае подойдет  такие СУБД, как Redis или Memcached. Они специально предназначены для кэширования данных в оперативной памяти, что обеспечивает быстрый доступ к предварительно сохраненным HTML страницам.

# Data Manipulation Language
1.	Порядок написания команд:
```
1) SELECT
2) FROM
3) WHERE
4) GROUP BY
5) HAVING
6) ORDER BY
7) LIMIT
```

Порядок выполнения команд:
```
1) FROM
2) WHERE
3) GROUP BY
4) HAVING
5) SELECT
6) ORDER BY
7) LIMIT
```


2.	Для удаления строк таблицы по условию в SQL используется команда DELETE с условием в инструкции WHERE после:
```
DELETE FROM table_name
WHERE condition;
```


С помощью этой команды нельзя удалить таблицу, только очистить данные в ней. Чтобы удалить таблицу, нужно воспользоваться следующей командой:
```
DROP TABLE table_name;
```

3.	
```
SELECT u.first_name as first_name,
       u.last_name as last_name,
       u.id as user_id
  FROM orders o
  JOIN users u
    ON o.user_id = u.id
 WHERE o._order_date SIMILAR to '\d+/(9|10|11)/2022';
```
4.	
```
SELECT *,
       CASE
       	    WHEN price = (SELECT MAX(price) from orders) THEN 10
       	    ELSE 0
       END as discount,
       CASE
       	    WHEN price = (SELECT MAX(price) from orders) THEN ROUND(price * 0.9, 2)
       	    ELSE price
       END as new_price
  FROM orders
```
5.	
```
DELETE
  FROM orders
 WHERE items > 4
    OR status = 'cancel_order'
```

6.	
```
SELECT domain, COUNT(domain) as cnt
  FROM (SELECT SUBSTRING(email, '(?<=@).+(?=\.)') AS domain
          FROM users
       WHERE gender = 'Male')
 GROUP BY DOMAIN
 order by cnt DESC
 LIMIT 3
```

7.	СУБД не обработает данный запрос, так как в инструкции WHERE происходит обращение на псевдоним, который мы осуществляем в инструкции SELECT, которая выполняется ПОЗЖЕ, чем WHERE.


